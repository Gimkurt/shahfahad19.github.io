var player='<div class="player"></div>',crate='<div class="crate"></div>';window.onload=(()=>{drawLevel(0),$(".info").hide(),showLevels(),document.addEventListener("swiped-left",function(n){swipe(-1)}),document.addEventListener("swiped-right",function(n){swipe(1)}),document.addEventListener("swiped-up",function(n){swipe(-10)}),document.addEventListener("swiped-down",function(n){swipe(10)}),$(document).on("keypress","input",function(n){37==n.which?swipe(-1):38==n.which?swipe(-10):39==n.which?swipe(1):40==n.which&&swipe(10)})}),swipe=(n=>{"none"==$(".info").css("display")&&move(n)}),showLevels=(()=>{$(".controls button").prop("disabled",!0);for(var n="",e=1;e<=15;e++){n+=`\n  <button class="shadow" onclick="selectLevel(${e-1})">${e}</button>\n `}$(".info").html(`\n <div class="lvlBtns">\n  <div>Select Level</div>\n  ${n}\n  <div style='background:transparent;color:white;'>Move the crates to marked locations to complete the level</div>\n  </div>`),$(".info").fadeIn(500)}),selectLevel=(n=>{"next"==n?(this.level++,n=this.level):"reset"==n&&(null==this.level&&(this.level=0),n=this.level),this.level=n,clearGame(),$(".level").html("Level "+(this.level+1)),drawLevel(this.level),$(".info").hide(),$(".controls button").prop("disabled",!1)}),drawLevel=(n=>{for(var e=levels[n],l=0;l<=90;l++)"."==e[l]?fill(l,"outside",""):"#"==e[l]?fill(l,"ground",'<div class="wall"></div>'):" "==e[l]?fill(l,"ground",""):"*"==e[l]?fill(l,"point",""):"@"==e[l]?fill(l,"ground",player):"£"==e[l]?fill(l,"ground",crate):"&"==e[l]&&fill(l,"point",crate)}),fill=((n,e,l)=>{$(".main").append(`<div id="${n}" class="${e}">${l}</div>`)}),clearGame=(()=>$(".main").html('<div class="info"></div>')),move=(n=>{var e=$(".player").parent().attr("id");e=parseInt(e),dest=e+n,next=dest+n;var l=$("#"+dest).html(),t=$("#"+next).html();""==l?($("#"+dest).html(player),$("#"+e).html("")):l==crate&&""==t&&($("#"+dest).html(player),$("#"+next).html(crate),$("#"+e).html(""),check())}),check=(()=>{var n=!0;$(".point").each(function(){$(this).html()!=crate&&(n=!1)}),n&&($(".info").html('\n      <div class="complete">\n      <h1>Level Completed </h1>\n      <br/>\n      <button onclick="selectLevel(\'next\')">Next</button>\n      </div>\n    '),$(".info").fadeIn(500),$(".controls button").prop("disabled",!0))}),showControls=(()=>{"none"==$(".controls").css("display")?($(".controls").css("display","grid"),$(".controlsbtn").html("Hide Controls")):($(".controls").hide(),$(".controlsbtn").html("Show Controls"))});var levels=["\n..###....\n..#*#....\n..#£####.\n###@ £*#.\n#* £ ###.\n####£#...\n...#*#...\n...###...\n.........\n","\n#####....\n#  @#....\n# ££#.###\n# £ #.#*#\n### ###*#\n.##    *#\n.#   #  #\n.#   ####\n.#####...\n","\n..####...\n.##  #...\n.# @£##..\n.##£  #..\n.## £ #..\n.#*£  #..\n.#**&*#..\n.######..\n.........\n","\n.####....\n.#@ ###..\n.# £  #..\n### # ##.\n#*# #  #.\n#*£  # #.\n#*   £ #.\n########.\n.........\n","\n.........\n..######.\n..#    #.\n###£££ #.\n#@ £** #.\n# £***##.\n####  #..\n...####..\n.........\n","\n.........\n..#####..\n###  @#..\n#  £* ##.\n#  *£* #.\n### &£ #.\n..#   ##.\n..#####..\n.........\n","\n..####...\n..#**#...\n.## *##..\n.#  £*#..\n## £  ##.\n#  #££ #.\n#  @   #.\n########.\n.........\n","\n.........\n########.\n#  #   #.\n# £**£ #.\n#@£*& ##.\n# £**£ #.\n#  #   #.\n########.\n.........\n","\n.........\n######...\n#    #...\n# £££##..\n#  #**###\n##  **£ #\n.#  @   #\n.########\n.........\n","\n.#######.\n.#**£**#.\n.#**#**#.\n.# £££ #.\n.#  £  #.\n.# £££ #.\n.#  #@ #.\n.#######.\n.........\n","\n.#####...\n.# @ ###.\n## #£  #.\n# &* * #.\n#  ££ ##.\n### #*#..\n..#   #..\n..#####..\n.........\n","\n.######..\n.#    #..\n.# £ @#..\n.##&  #..\n.# & ##..\n.# & #...\n.# & #...\n.# * #...\n.#####...\n","\n...####..\n...#  #..\n.###£ ##.\n.#  & @#.\n.#  &  #.\n.#  & ##.\n.###& #..\n...#*##..\n...###...\n","\n#####....\n#   #####\n# # #   #\n# £   £ #\n#**#£#£##\n#*@£   #.\n#**  ###.\n######...\n.........\n","\n.........\n.######..\n.#    ##.\n##*##£ #.\n# **£  #.\n#  #£  #.\n#  @ ###.\n######...\n.........\n"];
